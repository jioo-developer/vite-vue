<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #container {
        position: relative;
        width: 100%;
        height: 25rem;
        overflow: hidden;
      }

      #container > .wrap {
        position: absolute;
        /* container 보다 크기가 50% 더 크도록 설정 */
        width: 150%;
        height: 150%;
        /* 각도 조정 */
        transform: rotate(-114deg) scale(1.1);
        /* 위치 조정 (선택사항) */
        top: -8rem;
        left: -4.5rem;
      }

      #container > .wrap > .box,
      #container > .wrap > .box2 {
        position: relative;
        width: 100%;
        height: 7.5rem;
        /* item 의 높이와 동일하게 설정 */
        overflow: hidden;
        margin-top: 0.63rem;
      }

      #container > .wrap > .box > .item,
      #container > .wrap > .box2 > .item {
        position: absolute;
        width: 7.5rem;
        height: 7.5rem;
        transform: rotate(90deg);
        /* 이미지 세로로 보이게 변경 */
      }
    </style>
  </head>
  <body>
    <div id="container">
      <div class="wrap">
        <div class="box2">
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
        </div>
        <div class="box">
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
        </div>
        <div class="box">
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
        </div>
        <div class="box2">
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
          <img
            class="item"
            src="../Desktop/WK01_Mo_2022-06-28_SUMMER-RUNNING_Styling_ePDP_01-6-1.jpg"
          />
        </div>
      </div>
    </div>
  </body>
  <script>
    const boxes = Array.from(document.querySelectorAll(".box"));
    const boxes2 = Array.from(document.querySelectorAll(".box2"));
    const boxMargin = parseInt(
      window
        .getComputedStyle(document.querySelector(".box"))
        .getPropertyValue("margin-top")
    );
    const itemGap =
      0.43 * parseFloat(getComputedStyle(document.documentElement).fontSize);
    // 전역변수
    boxes2.forEach((item) => setProperty(item, rightMoveLogic));
    boxes.forEach((item) => setProperty(item, leftMoveLogic));
    // boxes의 item의 갯수만큼 initRolling에 item을 넣어 실행

    function setProperty(boxes, moveLogic) {
      const items = Array.from(boxes.querySelectorAll(".item"));
      let itemLeft = 0;
      const rememberLeft = [];
      items.forEach((item) => {
        rememberLeft.push(itemLeft);
        item.style.left = itemLeft + "px";
        itemLeft += item.offsetWidth + itemGap;
      });
      moveLogic(items, itemLeft, rememberLeft);
    }
    function leftMoveLogic(items, itemLeft, rememberLeft) {
      let first = 1;
      let last = items.length;
      const itemSize = items[0].clientWidth;
      function animate() {
        items.forEach((item, index) => {
          if (rememberLeft[index] < -itemSize) {
            const newLeft = rememberLeft[last - 1] + itemSize + itemGap;
            item.style.left = newLeft + "px";
            rememberLeft[index] = newLeft;
            first++;
            last++;
            if (last > items.length) last = 1;
            if (first > items.length) first = 1;
          } else {
            item.style.left = --rememberLeft[index] + "px";
          }
        });

        requestAnimationFrame(animate);
      }

      animate();
    }

    function rightMoveLogic(items, itemLeft, rememberLeft) {
      let first = 1;
      let last = items.length;
      const itemSize = items[0].clientWidth;
      function animate() {
        items.forEach((item, index) => {
          if (rememberLeft[index] > window.outerWidth + boxMargin) {
            const newLeft = rememberLeft[first - 1] - itemSize - itemGap;
            item.style.left = newLeft + "px";
            rememberLeft[index] = newLeft;
            first--;
            last--;
            if (last < 1) last = items.length;
            if (first < 1) first = items.length;
          } else {
            item.style.left = ++rememberLeft[index] + "px";
          }
        });

        requestAnimationFrame(animate);
      }

      animate();
    }
  </script>
</html>
